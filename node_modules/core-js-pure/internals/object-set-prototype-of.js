/* eslint-disable no-proto -- safe */
<<<<<<< HEAD
var uncurryThis = require('../internals/function-uncurry-this');
=======
>>>>>>> 39a8ac91c1203e59702c1b86c18a4c5e5058db03
var anObject = require('../internals/an-object');
var aPossiblePrototype = require('../internals/a-possible-prototype');

// `Object.setPrototypeOf` method
// https://tc39.es/ecma262/#sec-object.setprototypeof
// Works with __proto__ only. Old v8 can't work with null proto objects.
<<<<<<< HEAD
// eslint-disable-next-line es/no-object-setprototypeof -- safe
=======
>>>>>>> 39a8ac91c1203e59702c1b86c18a4c5e5058db03
module.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {
  var CORRECT_SETTER = false;
  var test = {};
  var setter;
  try {
<<<<<<< HEAD
    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
    setter = uncurryThis(Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set);
    setter(test, []);
=======
    setter = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set;
    setter.call(test, []);
>>>>>>> 39a8ac91c1203e59702c1b86c18a4c5e5058db03
    CORRECT_SETTER = test instanceof Array;
  } catch (error) { /* empty */ }
  return function setPrototypeOf(O, proto) {
    anObject(O);
    aPossiblePrototype(proto);
<<<<<<< HEAD
    if (CORRECT_SETTER) setter(O, proto);
=======
    if (CORRECT_SETTER) setter.call(O, proto);
>>>>>>> 39a8ac91c1203e59702c1b86c18a4c5e5058db03
    else O.__proto__ = proto;
    return O;
  };
}() : undefined);
