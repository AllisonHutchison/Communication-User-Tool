'use strict';
var $ = require('../internals/export');
<<<<<<< HEAD
var call = require('../internals/function-call');
=======
>>>>>>> 39a8ac91c1203e59702c1b86c18a4c5e5058db03
var toObject = require('../internals/to-object');
var toPrimitive = require('../internals/to-primitive');
var toISOString = require('../internals/date-to-iso-string');
var classof = require('../internals/classof-raw');
var fails = require('../internals/fails');

var FORCED = fails(function () {
  return new Date(NaN).toJSON() !== null
<<<<<<< HEAD
    || call(Date.prototype.toJSON, { toISOString: function () { return 1; } }) !== 1;
=======
    || Date.prototype.toJSON.call({ toISOString: function () { return 1; } }) !== 1;
>>>>>>> 39a8ac91c1203e59702c1b86c18a4c5e5058db03
});

// `Date.prototype.toJSON` method
// https://tc39.es/ecma262/#sec-date.prototype.tojson
$({ target: 'Date', proto: true, forced: FORCED }, {
  // eslint-disable-next-line no-unused-vars -- required for `.length`
  toJSON: function toJSON(key) {
    var O = toObject(this);
<<<<<<< HEAD
    var pv = toPrimitive(O, 'number');
    return typeof pv == 'number' && !isFinite(pv) ? null :
      (!('toISOString' in O) && classof(O) == 'Date') ? call(toISOString, O) : O.toISOString();
=======
    var pv = toPrimitive(O);
    return typeof pv == 'number' && !isFinite(pv) ? null :
      (!('toISOString' in O) && classof(O) == 'Date') ? toISOString.call(O) : O.toISOString();
>>>>>>> 39a8ac91c1203e59702c1b86c18a4c5e5058db03
  }
});
