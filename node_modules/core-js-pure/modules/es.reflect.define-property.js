var $ = require('../internals/export');
var DESCRIPTORS = require('../internals/descriptors');
var anObject = require('../internals/an-object');
<<<<<<< HEAD
var toPropertyKey = require('../internals/to-property-key');
=======
var toPrimitive = require('../internals/to-primitive');
>>>>>>> 39a8ac91c1203e59702c1b86c18a4c5e5058db03
var definePropertyModule = require('../internals/object-define-property');
var fails = require('../internals/fails');

// MS Edge has broken Reflect.defineProperty - throwing instead of returning false
var ERROR_INSTEAD_OF_FALSE = fails(function () {
<<<<<<< HEAD
  // eslint-disable-next-line es/no-reflect -- required for testing
=======
  /* global Reflect -- required for testing */
>>>>>>> 39a8ac91c1203e59702c1b86c18a4c5e5058db03
  Reflect.defineProperty(definePropertyModule.f({}, 1, { value: 1 }), 1, { value: 2 });
});

// `Reflect.defineProperty` method
// https://tc39.es/ecma262/#sec-reflect.defineproperty
$({ target: 'Reflect', stat: true, forced: ERROR_INSTEAD_OF_FALSE, sham: !DESCRIPTORS }, {
  defineProperty: function defineProperty(target, propertyKey, attributes) {
    anObject(target);
<<<<<<< HEAD
    var key = toPropertyKey(propertyKey);
=======
    var key = toPrimitive(propertyKey, true);
>>>>>>> 39a8ac91c1203e59702c1b86c18a4c5e5058db03
    anObject(attributes);
    try {
      definePropertyModule.f(target, key, attributes);
      return true;
    } catch (error) {
      return false;
    }
  }
});
