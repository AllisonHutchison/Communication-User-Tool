'use strict';
// https://github.com/tc39/proposal-iterator-helpers
var $ = require('../internals/export');
<<<<<<< HEAD
var apply = require('../internals/function-apply');
var aCallable = require('../internals/a-callable');
=======
var aFunction = require('../internals/a-function');
>>>>>>> 39a8ac91c1203e59702c1b86c18a4c5e5058db03
var anObject = require('../internals/an-object');
var createIteratorProxy = require('../internals/iterator-create-proxy');
var callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');

<<<<<<< HEAD
var IteratorProxy = createIteratorProxy(function (args) {
=======
var IteratorProxy = createIteratorProxy(function (arg) {
>>>>>>> 39a8ac91c1203e59702c1b86c18a4c5e5058db03
  var iterator = this.iterator;
  var filterer = this.filterer;
  var next = this.next;
  var result, done, value;
  while (true) {
<<<<<<< HEAD
    result = anObject(apply(next, iterator, args));
=======
    result = anObject(next.call(iterator, arg));
>>>>>>> 39a8ac91c1203e59702c1b86c18a4c5e5058db03
    done = this.done = !!result.done;
    if (done) return;
    value = result.value;
    if (callWithSafeIterationClosing(iterator, filterer, value)) return value;
  }
});

$({ target: 'Iterator', proto: true, real: true }, {
  filter: function filter(filterer) {
    return new IteratorProxy({
      iterator: anObject(this),
<<<<<<< HEAD
      filterer: aCallable(filterer)
=======
      filterer: aFunction(filterer)
>>>>>>> 39a8ac91c1203e59702c1b86c18a4c5e5058db03
    });
  }
});
