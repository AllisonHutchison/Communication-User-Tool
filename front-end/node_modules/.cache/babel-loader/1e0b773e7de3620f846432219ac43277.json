{"ast":null,"code":"var _jsxFileName = \"/Users/roninsharma/Desktop/Cornell/FALL 2021/ENGRC 3350/Communication-User-Tool/front-end/src/components/Analytics.js\";\nimport React, { Component } from \"react\";\nimport ReadinessScore from \"./ReadinessScore\";\nimport * as d3 from \"d3\";\nimport ConfettiExplosion from \"@reonomy/react-confetti-explosion\";\nexport default class Analytics extends Component {\n  constructor(props) {\n    super(props);\n\n    this.greaterThanEighty = num => {\n      console.log(typeof num);\n      return num >= 80;\n    };\n\n    this.getRandomInt = () => {\n      return Math.floor(Math.random() * 100);\n    };\n\n    this.onClick = () => {\n      this.setState({\n        buttonDisplay: false\n      }, () => {\n        this.setState({\n          isExploding: false\n        }, () => {\n          console.log(this.props.data);\n          d3.select(\".graph\").style(\"display\", \"inline\");\n          this.drawChart();\n        });\n      });\n    };\n\n    this.componentDidMount = () => {\n      this.state.svg = d3.select(this.ref.current).append(\"svg\").attr(\"class\", \"graph\").attr(\"width\", 800).attr(\"height\", 500).style(\"display\", \"none\");\n      const width = this.state.svg.attr(\"width\");\n      const height = this.state.svg.attr(\"height\");\n      const margin = {\n        top: 20,\n        right: 70,\n        bottom: 40,\n        left: 100\n      };\n      this.setState({\n        chartWidth: width - margin.left - margin.right\n      });\n      this.setState({\n        chartHeight: height - margin.top - margin.bottom\n      });\n      const annotations = this.state.svg.append(\"g\").attr(\"id\", \"annotations\");\n      this.setState({\n        chartArea: this.state.svg.append(\"g\").attr(\"id\", \"chart\").attr(\"transform\", `translate(${margin.left},${margin.top})`)\n      });\n      this.setState({\n        bottomAxis: d3.axisBottom()\n      });\n      this.setState({\n        bottomAxisG: annotations.append(\"g\").attr(\"class\", \"x axis\").attr(\"transform\", `translate(${margin.left},${300 + margin.top})`)\n      });\n      this.setState({\n        leftAxis: d3.axisLeft()\n      });\n      this.setState({\n        leftAxisG: annotations.append(\"g\").attr(\"class\", \"y axis\").attr(\"transform\", `translate(${margin.left - 10},${margin.top})`)\n      });\n    };\n\n    this.drawChart = () => {\n      // var res = [];\n      // var i = 1.0;\n      // const col = [\"#018588\", \"#FFC85C\"];\n      // for (const [key, v] of Object.entries(this.props.data)) {\n      //   i = i - 0.1;\n      //   for (var j = 0; j < v.length; j++) {\n      //     res.push({\n      //       skill: key,\n      //       frequency: v[j],\n      //       opacity: i,\n      //       color: col[j],\n      //     });\n      //   }\n      // }\n      var res = this.props.data;\n      const skillExtent = d3.map(res, d => d.skill); // console.log(skillExtent);\n\n      const frequencyExtent = [0, d3.max(res, d => d.frequency)];\n      const skillScale = d3.scaleBand().domain(skillExtent).range([0, this.state.chartHeight]);\n\n      for (const d of Object.entries(res)) {\n        console.log(d.skill);\n        console.log(skillScale(d.skill));\n      }\n\n      console.log(skillScale);\n      this.state.leftAxis.scale(skillScale).tickSize(0);\n      this.state.leftAxisG.transition().call(this.state.leftAxis);\n      const frequencyScale = d3.scaleLinear().domain(frequencyExtent).range([0, this.state.chartWidth]);\n      this.state.chartArea.selectAll(\"rect.bar\").data(res).join(enter => enter.append(\"rect\").attr(\"class\", \"bar\").attr(\"fill\", d => d.color).attr(\"x\", d => 0).attr(\"y\", d => d.color === \"#018588\" ? skillScale(d.skill) : skillScale(d.skill) + 0.5 * skillScale.bandwidth()).attr(\"width\", d => frequencyScale(d.frequency)).attr(\"height\", 0.5 * skillScale.bandwidth()).attr(\"opacity\", d => d.opacity));\n      this.state.chartArea.selectAll(\"text.label\").data(res).join(enter => enter.append(\"text\").attr(\"class\", \"label\").attr(\"text-anchor\", \"end\").attr(\"font-size\", \"15px\").attr(\"x\", d => frequencyScale(d.frequency) + 15).attr(\"y\", d => d.color === \"#018588\" ? skillScale(d.skill) + skillScale.bandwidth() / 4 + 5 : skillScale(d.skill) + 3 * skillScale.bandwidth() / 4 + 5).text(d => {\n        if (d.frequency === 0) {\n          return \"\";\n        } else {\n          return d.frequency;\n        }\n      }));\n    };\n\n    this.state = {\n      chartExists: false,\n      svg: null,\n      chartWidth: null,\n      chartHeight: null,\n      chartArea: null,\n      bottomAxis: null,\n      bottomAxisG: null,\n      leftAxis: null,\n      leftAxisG: null,\n      isExploding: this.greaterThanEighty(this.props.score),\n      getColor: true,\n      buttonDisplay: true\n    };\n    this.ref = React.createRef();\n    this.onClick = this.onClick.bind(this);\n    this.greaterThanEighty = this.greaterThanEighty.bind(this);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"analytics-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ReadinessScore, {\n      handleBack: this.props.handleBack,\n      score: this.props.score,\n      className: \"readiness-score-analytics\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }\n    }), this.state.isExploding && /*#__PURE__*/React.createElement(ConfettiExplosion, {\n      style: {\n        force: \"0.6\",\n        duration: \"5000\",\n        particleCount: \"200\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"communication-skills-chart-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"important-communication-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }\n    }, \"Most Important Communication Skills:\", \" \"), this.state.buttonDisplay && /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.onClick,\n      className: \"start-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }\n    }, \" \", \"Display Analysis\", \" \"), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        alignItems: \"left\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chart\",\n      ref: this.ref,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"resume_next\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }\n    }, \"Next Steps\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }\n    }, \"Compare and contrast the communication skills of your resume (in yellow) and the job you entered (in green). Make some changes, try putting in your new resume, and see if your Readiness Score rises! Based on these results, you can revise your resume to better demonstrate the preferred communication skills for this job! Head over to our \\u2018About Us\\u2019 page to wrap up your skills analysis and meet our team.\")));\n  }\n\n}","map":{"version":3,"sources":["/Users/roninsharma/Desktop/Cornell/FALL 2021/ENGRC 3350/Communication-User-Tool/front-end/src/components/Analytics.js"],"names":["React","Component","ReadinessScore","d3","ConfettiExplosion","Analytics","constructor","props","greaterThanEighty","num","console","log","getRandomInt","Math","floor","random","onClick","setState","buttonDisplay","isExploding","data","select","style","drawChart","componentDidMount","state","svg","ref","current","append","attr","width","height","margin","top","right","bottom","left","chartWidth","chartHeight","annotations","chartArea","bottomAxis","axisBottom","bottomAxisG","leftAxis","axisLeft","leftAxisG","res","skillExtent","map","d","skill","frequencyExtent","max","frequency","skillScale","scaleBand","domain","range","Object","entries","scale","tickSize","transition","call","frequencyScale","scaleLinear","selectAll","join","enter","color","bandwidth","opacity","text","chartExists","score","getColor","createRef","bind","render","handleBack","force","duration","particleCount","alignItems"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAO,KAAKC,EAAZ,MAAoB,IAApB;AACA,OAAOC,iBAAP,MAA8B,mCAA9B;AAEA,eAAe,MAAMC,SAAN,SAAwBJ,SAAxB,CAAkC;AAC/CK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAyBnBC,iBAzBmB,GAyBEC,GAAD,IAAS;AAC3BC,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAOF,GAAnB;AACA,aAAOA,GAAG,IAAI,EAAd;AACD,KA5BkB;;AAAA,SA8BnBG,YA9BmB,GA8BJ,MAAM;AACnB,aAAOC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,GAA3B,CAAP;AACD,KAhCkB;;AAAA,SAkCnBC,OAlCmB,GAkCT,MAAM;AACd,WAAKC,QAAL,CAAc;AAAEC,QAAAA,aAAa,EAAE;AAAjB,OAAd,EAAwC,MAAM;AAC5C,aAAKD,QAAL,CAAc;AAAEE,UAAAA,WAAW,EAAE;AAAf,SAAd,EAAsC,MAAM;AAC1CT,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKJ,KAAL,CAAWa,IAAvB;AACAjB,UAAAA,EAAE,CAACkB,MAAH,CAAU,QAAV,EAAoBC,KAApB,CAA0B,SAA1B,EAAqC,QAArC;AACA,eAAKC,SAAL;AACD,SAJD;AAKD,OAND;AAOD,KA1CkB;;AAAA,SA4CnBC,iBA5CmB,GA4CC,MAAM;AACxB,WAAKC,KAAL,CAAWC,GAAX,GAAiBvB,EAAE,CAChBkB,MADc,CACP,KAAKM,GAAL,CAASC,OADF,EAEdC,MAFc,CAEP,KAFO,EAGdC,IAHc,CAGT,OAHS,EAGA,OAHA,EAIdA,IAJc,CAIT,OAJS,EAIA,GAJA,EAKdA,IALc,CAKT,QALS,EAKC,GALD,EAMdR,KANc,CAMR,SANQ,EAMG,MANH,CAAjB;AAQA,YAAMS,KAAK,GAAG,KAAKN,KAAL,CAAWC,GAAX,CAAeI,IAAf,CAAoB,OAApB,CAAd;AACA,YAAME,MAAM,GAAG,KAAKP,KAAL,CAAWC,GAAX,CAAeI,IAAf,CAAoB,QAApB,CAAf;AAEA,YAAMG,MAAM,GAAG;AAAEC,QAAAA,GAAG,EAAE,EAAP;AAAWC,QAAAA,KAAK,EAAE,EAAlB;AAAsBC,QAAAA,MAAM,EAAE,EAA9B;AAAkCC,QAAAA,IAAI,EAAE;AAAxC,OAAf;AACA,WAAKpB,QAAL,CAAc;AAAEqB,QAAAA,UAAU,EAAEP,KAAK,GAAGE,MAAM,CAACI,IAAf,GAAsBJ,MAAM,CAACE;AAA3C,OAAd;AACA,WAAKlB,QAAL,CAAc;AAAEsB,QAAAA,WAAW,EAAEP,MAAM,GAAGC,MAAM,CAACC,GAAhB,GAAsBD,MAAM,CAACG;AAA5C,OAAd;AAEA,YAAMI,WAAW,GAAG,KAAKf,KAAL,CAAWC,GAAX,CAAeG,MAAf,CAAsB,GAAtB,EAA2BC,IAA3B,CAAgC,IAAhC,EAAsC,aAAtC,CAApB;AACA,WAAKb,QAAL,CAAc;AACZwB,QAAAA,SAAS,EAAE,KAAKhB,KAAL,CAAWC,GAAX,CACRG,MADQ,CACD,GADC,EAERC,IAFQ,CAEH,IAFG,EAEG,OAFH,EAGRA,IAHQ,CAGH,WAHG,EAGW,aAAYG,MAAM,CAACI,IAAK,IAAGJ,MAAM,CAACC,GAAI,GAHjD;AADC,OAAd;AAOA,WAAKjB,QAAL,CAAc;AAAEyB,QAAAA,UAAU,EAAEvC,EAAE,CAACwC,UAAH;AAAd,OAAd;AACA,WAAK1B,QAAL,CAAc;AACZ2B,QAAAA,WAAW,EAAEJ,WAAW,CACrBX,MADU,CACH,GADG,EAEVC,IAFU,CAEL,OAFK,EAEI,QAFJ,EAGVA,IAHU,CAGL,WAHK,EAGS,aAAYG,MAAM,CAACI,IAAK,IAAG,MAAMJ,MAAM,CAACC,GAAI,GAHrD;AADD,OAAd;AAOA,WAAKjB,QAAL,CAAc;AAAE4B,QAAAA,QAAQ,EAAE1C,EAAE,CAAC2C,QAAH;AAAZ,OAAd;AACA,WAAK7B,QAAL,CAAc;AACZ8B,QAAAA,SAAS,EAAEP,WAAW,CACnBX,MADQ,CACD,GADC,EAERC,IAFQ,CAEH,OAFG,EAEM,QAFN,EAGRA,IAHQ,CAGH,WAHG,EAGW,aAAYG,MAAM,CAACI,IAAP,GAAc,EAAG,IAAGJ,MAAM,CAACC,GAAI,GAHtD;AADC,OAAd;AAMD,KAnFkB;;AAAA,SAqFnBX,SArFmB,GAqFP,MAAM;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,UAAIyB,GAAG,GAAG,KAAKzC,KAAL,CAAWa,IAArB;AAEA,YAAM6B,WAAW,GAAG9C,EAAE,CAAC+C,GAAH,CAAOF,GAAP,EAAaG,CAAD,IAAOA,CAAC,CAACC,KAArB,CAApB,CAlBgB,CAmBhB;;AAEA,YAAMC,eAAe,GAAG,CAAC,CAAD,EAAIlD,EAAE,CAACmD,GAAH,CAAON,GAAP,EAAaG,CAAD,IAAOA,CAAC,CAACI,SAArB,CAAJ,CAAxB;AAEA,YAAMC,UAAU,GAAGrD,EAAE,CAClBsD,SADgB,GAEhBC,MAFgB,CAETT,WAFS,EAGhBU,KAHgB,CAGV,CAAC,CAAD,EAAI,KAAKlC,KAAL,CAAWc,WAAf,CAHU,CAAnB;;AAKA,WAAK,MAAMY,CAAX,IAAgBS,MAAM,CAACC,OAAP,CAAeb,GAAf,CAAhB,EAAqC;AACnCtC,QAAAA,OAAO,CAACC,GAAR,CAAYwC,CAAC,CAACC,KAAd;AACA1C,QAAAA,OAAO,CAACC,GAAR,CAAY6C,UAAU,CAACL,CAAC,CAACC,KAAH,CAAtB;AACD;;AAED1C,MAAAA,OAAO,CAACC,GAAR,CAAY6C,UAAZ;AAEA,WAAK/B,KAAL,CAAWoB,QAAX,CAAoBiB,KAApB,CAA0BN,UAA1B,EAAsCO,QAAtC,CAA+C,CAA/C;AACA,WAAKtC,KAAL,CAAWsB,SAAX,CAAqBiB,UAArB,GAAkCC,IAAlC,CAAuC,KAAKxC,KAAL,CAAWoB,QAAlD;AAEA,YAAMqB,cAAc,GAAG/D,EAAE,CACtBgE,WADoB,GAEpBT,MAFoB,CAEbL,eAFa,EAGpBM,KAHoB,CAGd,CAAC,CAAD,EAAI,KAAKlC,KAAL,CAAWa,UAAf,CAHc,CAAvB;AAKA,WAAKb,KAAL,CAAWgB,SAAX,CACG2B,SADH,CACa,UADb,EAEGhD,IAFH,CAEQ4B,GAFR,EAGGqB,IAHH,CAGSC,KAAD,IACJA,KAAK,CACFzC,MADH,CACU,MADV,EAEGC,IAFH,CAEQ,OAFR,EAEiB,KAFjB,EAGGA,IAHH,CAGQ,MAHR,EAGiBqB,CAAD,IAAOA,CAAC,CAACoB,KAHzB,EAIGzC,IAJH,CAIQ,GAJR,EAIcqB,CAAD,IAAO,CAJpB,EAKGrB,IALH,CAKQ,GALR,EAKcqB,CAAD,IACTA,CAAC,CAACoB,KAAF,KAAY,SAAZ,GACIf,UAAU,CAACL,CAAC,CAACC,KAAH,CADd,GAEII,UAAU,CAACL,CAAC,CAACC,KAAH,CAAV,GAAsB,MAAMI,UAAU,CAACgB,SAAX,EARpC,EAUG1C,IAVH,CAUQ,OAVR,EAUkBqB,CAAD,IAAOe,cAAc,CAACf,CAAC,CAACI,SAAH,CAVtC,EAWGzB,IAXH,CAWQ,QAXR,EAWkB,MAAM0B,UAAU,CAACgB,SAAX,EAXxB,EAYG1C,IAZH,CAYQ,SAZR,EAYoBqB,CAAD,IAAOA,CAAC,CAACsB,OAZ5B,CAJJ;AAmBA,WAAKhD,KAAL,CAAWgB,SAAX,CACG2B,SADH,CACa,YADb,EAEGhD,IAFH,CAEQ4B,GAFR,EAGGqB,IAHH,CAGSC,KAAD,IACJA,KAAK,CACFzC,MADH,CACU,MADV,EAEGC,IAFH,CAEQ,OAFR,EAEiB,OAFjB,EAGGA,IAHH,CAGQ,aAHR,EAGuB,KAHvB,EAIGA,IAJH,CAIQ,WAJR,EAIqB,MAJrB,EAKGA,IALH,CAKQ,GALR,EAKcqB,CAAD,IAAOe,cAAc,CAACf,CAAC,CAACI,SAAH,CAAd,GAA8B,EALlD,EAMGzB,IANH,CAMQ,GANR,EAMcqB,CAAD,IACTA,CAAC,CAACoB,KAAF,KAAY,SAAZ,GACIf,UAAU,CAACL,CAAC,CAACC,KAAH,CAAV,GAAsBI,UAAU,CAACgB,SAAX,KAAyB,CAA/C,GAAmD,CADvD,GAEIhB,UAAU,CAACL,CAAC,CAACC,KAAH,CAAV,GAAuB,IAAII,UAAU,CAACgB,SAAX,EAAL,GAA+B,CAArD,GAAyD,CATjE,EAWGE,IAXH,CAWSvB,CAAD,IAAO;AACX,YAAIA,CAAC,CAACI,SAAF,KAAgB,CAApB,EAAuB;AACrB,iBAAO,EAAP;AACD,SAFD,MAEO;AACL,iBAAOJ,CAAC,CAACI,SAAT;AACD;AACF,OAjBH,CAJJ;AAuBD,KA1KkB;;AAEjB,SAAK9B,KAAL,GAAa;AACXkD,MAAAA,WAAW,EAAE,KADF;AAEXjD,MAAAA,GAAG,EAAE,IAFM;AAGXY,MAAAA,UAAU,EAAE,IAHD;AAIXC,MAAAA,WAAW,EAAE,IAJF;AAKXE,MAAAA,SAAS,EAAE,IALA;AAMXC,MAAAA,UAAU,EAAE,IAND;AAOXE,MAAAA,WAAW,EAAE,IAPF;AAQXC,MAAAA,QAAQ,EAAE,IARC;AASXE,MAAAA,SAAS,EAAE,IATA;AAWX5B,MAAAA,WAAW,EAAE,KAAKX,iBAAL,CAAuB,KAAKD,KAAL,CAAWqE,KAAlC,CAXF;AAYXC,MAAAA,QAAQ,EAAE,IAZC;AAcX3D,MAAAA,aAAa,EAAE;AAdJ,KAAb;AAiBA,SAAKS,GAAL,GAAW3B,KAAK,CAAC8E,SAAN,EAAX;AAEA,SAAK9D,OAAL,GAAe,KAAKA,OAAL,CAAa+D,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAKvE,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBuE,IAAvB,CAA4B,IAA5B,CAAzB;AACD;;AAqJDC,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,cAAD;AACE,MAAA,UAAU,EAAE,KAAKzE,KAAL,CAAW0E,UADzB;AAEE,MAAA,KAAK,EAAE,KAAK1E,KAAL,CAAWqE,KAFpB;AAGE,MAAA,SAAS,EAAC,2BAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAOG,KAAKnD,KAAL,CAAWN,WAAX,iBACC,oBAAC,iBAAD;AACE,MAAA,KAAK,EAAE;AACL+D,QAAAA,KAAK,EAAE,KADF;AAELC,QAAAA,QAAQ,EAAE,MAFL;AAGLC,QAAAA,aAAa,EAAE;AAHV,OADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARJ,eAgBE;AAAK,MAAA,SAAS,EAAC,sCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,+BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CACuC,GADvC,CADF,EAIG,KAAK3D,KAAL,CAAWP,aAAX,iBACC;AAAQ,MAAA,OAAO,EAAE,KAAKF,OAAtB;AAA+B,MAAA,SAAS,EAAC,cAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,GADH,sBAEmB,GAFnB,CALJ,eAUE;AAAK,MAAA,KAAK,EAAE;AAAEqE,QAAAA,UAAU,EAAE;AAAd,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,OAAf;AAAuB,MAAA,GAAG,EAAE,KAAK1D,GAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAVF,CAhBF,eA8BE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,waAFF,CA9BF,CADF;AAqCD;;AAnN8C","sourcesContent":["import React, { Component } from \"react\";\nimport ReadinessScore from \"./ReadinessScore\";\nimport * as d3 from \"d3\";\nimport ConfettiExplosion from \"@reonomy/react-confetti-explosion\";\n\nexport default class Analytics extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      chartExists: false,\n      svg: null,\n      chartWidth: null,\n      chartHeight: null,\n      chartArea: null,\n      bottomAxis: null,\n      bottomAxisG: null,\n      leftAxis: null,\n      leftAxisG: null,\n\n      isExploding: this.greaterThanEighty(this.props.score),\n      getColor: true,\n\n      buttonDisplay: true,\n    };\n\n    this.ref = React.createRef();\n\n    this.onClick = this.onClick.bind(this);\n    this.greaterThanEighty = this.greaterThanEighty.bind(this);\n  }\n\n  greaterThanEighty = (num) => {\n    console.log(typeof num);\n    return num >= 80;\n  };\n\n  getRandomInt = () => {\n    return Math.floor(Math.random() * 100);\n  };\n\n  onClick = () => {\n    this.setState({ buttonDisplay: false }, () => {\n      this.setState({ isExploding: false }, () => {\n        console.log(this.props.data);\n        d3.select(\".graph\").style(\"display\", \"inline\");\n        this.drawChart();\n      });\n    });\n  };\n\n  componentDidMount = () => {\n    this.state.svg = d3\n      .select(this.ref.current)\n      .append(\"svg\")\n      .attr(\"class\", \"graph\")\n      .attr(\"width\", 800)\n      .attr(\"height\", 500)\n      .style(\"display\", \"none\");\n\n    const width = this.state.svg.attr(\"width\");\n    const height = this.state.svg.attr(\"height\");\n\n    const margin = { top: 20, right: 70, bottom: 40, left: 100 };\n    this.setState({ chartWidth: width - margin.left - margin.right });\n    this.setState({ chartHeight: height - margin.top - margin.bottom });\n\n    const annotations = this.state.svg.append(\"g\").attr(\"id\", \"annotations\");\n    this.setState({\n      chartArea: this.state.svg\n        .append(\"g\")\n        .attr(\"id\", \"chart\")\n        .attr(\"transform\", `translate(${margin.left},${margin.top})`),\n    });\n\n    this.setState({ bottomAxis: d3.axisBottom() });\n    this.setState({\n      bottomAxisG: annotations\n        .append(\"g\")\n        .attr(\"class\", \"x axis\")\n        .attr(\"transform\", `translate(${margin.left},${300 + margin.top})`),\n    });\n\n    this.setState({ leftAxis: d3.axisLeft() });\n    this.setState({\n      leftAxisG: annotations\n        .append(\"g\")\n        .attr(\"class\", \"y axis\")\n        .attr(\"transform\", `translate(${margin.left - 10},${margin.top})`),\n    });\n  };\n\n  drawChart = () => {\n    // var res = [];\n    // var i = 1.0;\n    // const col = [\"#018588\", \"#FFC85C\"];\n    // for (const [key, v] of Object.entries(this.props.data)) {\n    //   i = i - 0.1;\n    //   for (var j = 0; j < v.length; j++) {\n    //     res.push({\n    //       skill: key,\n    //       frequency: v[j],\n    //       opacity: i,\n    //       color: col[j],\n    //     });\n    //   }\n    // }\n\n    var res = this.props.data;\n\n    const skillExtent = d3.map(res, (d) => d.skill);\n    // console.log(skillExtent);\n\n    const frequencyExtent = [0, d3.max(res, (d) => d.frequency)];\n\n    const skillScale = d3\n      .scaleBand()\n      .domain(skillExtent)\n      .range([0, this.state.chartHeight]);\n\n    for (const d of Object.entries(res)) {\n      console.log(d.skill);\n      console.log(skillScale(d.skill));\n    }\n\n    console.log(skillScale);\n\n    this.state.leftAxis.scale(skillScale).tickSize(0);\n    this.state.leftAxisG.transition().call(this.state.leftAxis);\n\n    const frequencyScale = d3\n      .scaleLinear()\n      .domain(frequencyExtent)\n      .range([0, this.state.chartWidth]);\n\n    this.state.chartArea\n      .selectAll(\"rect.bar\")\n      .data(res)\n      .join((enter) =>\n        enter\n          .append(\"rect\")\n          .attr(\"class\", \"bar\")\n          .attr(\"fill\", (d) => d.color)\n          .attr(\"x\", (d) => 0)\n          .attr(\"y\", (d) =>\n            d.color === \"#018588\"\n              ? skillScale(d.skill)\n              : skillScale(d.skill) + 0.5 * skillScale.bandwidth()\n          )\n          .attr(\"width\", (d) => frequencyScale(d.frequency))\n          .attr(\"height\", 0.5 * skillScale.bandwidth())\n          .attr(\"opacity\", (d) => d.opacity)\n      );\n\n    this.state.chartArea\n      .selectAll(\"text.label\")\n      .data(res)\n      .join((enter) =>\n        enter\n          .append(\"text\")\n          .attr(\"class\", \"label\")\n          .attr(\"text-anchor\", \"end\")\n          .attr(\"font-size\", \"15px\")\n          .attr(\"x\", (d) => frequencyScale(d.frequency) + 15)\n          .attr(\"y\", (d) =>\n            d.color === \"#018588\"\n              ? skillScale(d.skill) + skillScale.bandwidth() / 4 + 5\n              : skillScale(d.skill) + (3 * skillScale.bandwidth()) / 4 + 5\n          )\n          .text((d) => {\n            if (d.frequency === 0) {\n              return \"\";\n            } else {\n              return d.frequency;\n            }\n          })\n      );\n  };\n\n  render() {\n    return (\n      <div className=\"analytics-page\">\n        <ReadinessScore\n          handleBack={this.props.handleBack}\n          score={this.props.score}\n          className=\"readiness-score-analytics\"\n        />\n\n        {this.state.isExploding && (\n          <ConfettiExplosion\n            style={{\n              force: \"0.6\",\n              duration: \"5000\",\n              particleCount: \"200\",\n            }}\n          />\n        )}\n        <div className=\"communication-skills-chart-container\">\n          <h4 className=\"important-communication-title\">\n            Most Important Communication Skills:{\" \"}\n          </h4>\n          {this.state.buttonDisplay && (\n            <button onClick={this.onClick} className=\"start-button\">\n              {\" \"}\n              Display Analysis{\" \"}\n            </button>\n          )}\n          <div style={{ alignItems: \"left\" }}>\n            <div className=\"chart\" ref={this.ref} />\n          </div>\n        </div>\n        <div className=\"resume_next\">\n          <h3>Next Steps</h3>\n          <p>Compare and contrast the communication skills of your resume (in yellow) and the job you entered (in green). Make some changes, try putting in your new resume, and see if your Readiness Score rises! Based on these results, you can revise your resume to better demonstrate the preferred communication skills for this job! Head over to our ‘About Us’ page to wrap up your skills analysis and meet our team.</p>\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}